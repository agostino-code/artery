# =============================================================================
# Stelvio Scenario - 6G Hybrid V2X Simulation
# Study of DENM transmission via terrestrial antenna, LEO satellite, and hybrid
# =============================================================================

[General]
network = artery.inet.World
sim-time-limit = 500s

cmdenv-express-mode = true
cmdenv-autoflush = true
debug-on-errors = true

**.scalar-recording = true
**.vector-recording = true

# SUMO integration
*.traci.core.version = -1
*.traci.launcher.typename = "PosixLauncher"
*.traci.launcher.sumo = "sumo"
*.traci.launcher.sumocfg = "stelvio.sumocfg"

# Storyboard for crash/witness events
*.withStoryboard = true
*.**.middleware.datetime = "2025-01-01 12:00:00"

*.withPhysicalEnvironment = false

# Static infrastructure manager
*.staticNodes.typename = "StaticNodeManager"
*.staticNodes.nodes = xmldoc("static_nodes.xml")
*.staticNodes.rsuType = "artery.inet.RSU"
*.staticNodes.rsuPrefix = ""
*.staticNodes.rsuHeight = 20m

# Radio propagation model
*.radioMedium.pathLossType = "FreeSpacePathLoss"
*.radioMedium.obstacleLossType = ""  # Disabled - no physical environment

# =============================================================================
# VEHICLE CONFIGURATION
# =============================================================================
*.node[*].numRadios = 1
*.node[*].wlan[*].typename = "VanetNic"
*.node[*].wlan[*].radio.channelNumber = 180
*.node[*].wlan[*].radio.carrierFrequency = 5.9 GHz
*.node[*].wlan[*].radio.transmitter.power = 200 mW
*.node[*].wlan[*].radio.receiver.sensitivity = -90 dBm
*.node[*].middleware.updateInterval = 0.1s
*.node[*].**.denmDeadline = 0.12s  # Deadline per considerare un DENM utile (120 ms)

# =============================================================================
# INFRASTRUCTURE CONFIGURATION (ANTENNA & SATELLITE)
# =============================================================================

# --- ANTENNA (Terrestrial 6G TN) ---
*.antenna.numRadios = 1
*.antenna.wlan[*].typename = "VanetNic"
*.antenna.wlan[*].radio.channelNumber = 180
*.antenna.wlan[*].radio.carrierFrequency = 5.9 GHz
*.antenna.wlan[*].radio.transmitter.power = 500 mW
*.antenna.wlan[*].radio.receiver.sensitivity = -95 dBm
*.antenna.middleware.updateInterval = 0.001s
*.antenna.middleware.services = xmldoc("config/services_infrastructure.xml")
*.antenna.mobility.**.displayStringTextFormat = "6G Antenna"
*.antenna.**.displayString = "i=device/antennatower"

# Infrastructure service parameters for antenna
*.antenna.middleware.InfrastructureService.infrastructureType = "terrestrial"
*.antenna.middleware.InfrastructureService.latency = 5ms  # 6G TN latency (1-5ms)
*.antenna.middleware.InfrastructureService.coverageRadius = 600m
*.antenna.middleware.InfrastructureService.coverageReliability = 0.65
*.antenna.middleware.InfrastructureService.transmitPower = 500mW

# --- SATELLITE (LEO NTN) ---
*.satellite.numRadios = 1
*.satellite.wlan[*].typename = "VanetNic"
*.satellite.wlan[*].radio.channelNumber = 180
*.satellite.wlan[*].radio.carrierFrequency = 5.9 GHz
*.satellite.wlan[*].radio.transmitter.power = 1000 mW
*.satellite.wlan[*].radio.receiver.sensitivity = -100 dBm
*.satellite.middleware.updateInterval = 0.001s
*.satellite.middleware.services = xmldoc("config/services_infrastructure.xml")
*.satellite.mobility.**.displayStringTextFormat = "LEO Satellite"
*.satellite.**.displayString = "i=device/satellite"

# Infrastructure service parameters for satellite
*.satellite.middleware.InfrastructureService.infrastructureType = "satellite"
*.satellite.middleware.InfrastructureService.latency = 45ms  # LEO latency (20-40ms)
*.satellite.middleware.InfrastructureService.coverageRadius = 5000m
*.satellite.middleware.InfrastructureService.coverageReliability = 0.99
*.satellite.middleware.InfrastructureService.transmitPower = 1000mW

# =============================================================================
# SCENARIO CONFIGURATIONS
# =============================================================================

# -----------------------------------------------------------------------------
# CRASHED SCENARIO - Terrestrial Only
# -----------------------------------------------------------------------------
[Config Crashed_Terrestrial]
extends = General
description = "Crashed vehicle sends immediate DENM via 6G terrestrial antenna"

*.storyboard.python = "crash_storyboard"
*.node[*].middleware.services = xmldoc("config/services_crashed.xml")

# Enable only terrestrial antenna
*.staticNodes.nodes = xml("<RSUs><rsu id='antenna' positionX='729.0' positionY='390.0' /></RSUs>")

result-dir = results/crashed_terrestrial

# -----------------------------------------------------------------------------
# CRASHED SCENARIO - Satellite Only
# -----------------------------------------------------------------------------
[Config Crashed_Satellite]
extends = General
description = "Crashed vehicle sends immediate DENM via LEO satellite"

*.storyboard.python = "crash_storyboard"
*.node[*].middleware.services = xmldoc("config/services_crashed.xml")

# Enable only satellite
*.staticNodes.nodes = xml("<RSUs><rsu id='satellite' positionX='729.0' positionY='390.0' /></RSUs>")

result-dir = results/crashed_satellite

# -----------------------------------------------------------------------------
# CRASHED SCENARIO - Hybrid (Both Active)
# -----------------------------------------------------------------------------
[Config Crashed_Hybrid]
extends = General
description = "Crashed vehicle sends immediate DENM via hybrid infrastructure"

*.storyboard.python = "crash_storyboard"
*.node[*].middleware.services = xmldoc("config/services_crashed.xml")

# Enable both antenna and satellite
*.staticNodes.nodes = xmldoc("static_nodes.xml")

result-dir = results/crashed_hybrid

# -----------------------------------------------------------------------------
# WITNESS SCENARIO - Terrestrial Only
# -----------------------------------------------------------------------------
[Config Witness_Terrestrial]
extends = General
description = "Witness vehicle sends delayed DENM via terrestrial antenna"

*.storyboard.python = "witness_storyboard"
*.node[*].middleware.services = xmldoc("config/services_witness.xml")

# Enable only terrestrial antenna
*.staticNodes.nodes = xml("<RSUs><rsu id='antenna' positionX='729.0' positionY='390.0' /></RSUs>")

result-dir = results/witness_terrestrial

# -----------------------------------------------------------------------------
# WITNESS SCENARIO - Satellite Only
# -----------------------------------------------------------------------------
[Config Witness_Satellite]
extends = General
description = "Witness vehicle sends delayed DENM via LEO satellite"

*.storyboard.python = "witness_storyboard"
*.node[*].middleware.services = xmldoc("config/services_witness.xml")

# Enable only satellite
*.staticNodes.nodes = xml("<RSUs><rsu id='satellite' positionX='729.0' positionY='390.0' /></RSUs>")

result-dir = results/witness_satellite

# -----------------------------------------------------------------------------
# WITNESS SCENARIO - Hybrid
# -----------------------------------------------------------------------------
[Config Witness_Hybrid]
extends = General
description = "Witness vehicle sends delayed DENM via hybrid infrastructure"

*.storyboard.python = "witness_storyboard"
*.node[*].middleware.services = xmldoc("config/services_witness.xml")

# Enable both antenna and satellite
*.staticNodes.nodes = xmldoc("static_nodes.xml")

result-dir = results/witness_hybrid

# =============================================================================
# GUI VARIANTS (for visual debugging)
# =============================================================================

[Config Crashed_Terrestrial_GUI]
extends = Crashed_Terrestrial
*.traci.launcher.sumo = "sumo-gui"

[Config Crashed_Satellite_GUI]
extends = Crashed_Satellite
*.traci.launcher.sumo = "sumo-gui"

[Config Crashed_Hybrid_GUI]
extends = Crashed_Hybrid
*.traci.launcher.sumo = "sumo-gui"

[Config Witness_Terrestrial_GUI]
extends = Witness_Terrestrial
*.traci.launcher.sumo = "sumo-gui"

[Config Witness_Satellite_GUI]
extends = Witness_Satellite
*.traci.launcher.sumo = "sumo-gui"

[Config Witness_Hybrid_GUI]
extends = Witness_Hybrid
*.traci.launcher.sumo = "sumo-gui"

